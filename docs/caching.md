## 성능 향상을 위한 캐싱 전략

 **‘최근 3일간 가장 많이 팔린 상품 TOP 5’** 를 조회하는 기능이 자주 사용되며, 동시에 많은 사용자가 요청할 경우 DB 조회에 시간이 오래 걸리고 성능 저하가 발생하는 문제가 있습니다. 이 문제를 해결하기 위해 캐시를 도입하려고 합니다.


### 문제점
- 빈번한 조회로 DB 부하가 증가하고, 동시에 많은 사용자가 요청 시 성능 저하 발생
- 복잡한 쿼리로 인해 DB에서 매번 계산이 필요
- 데이터 업데이트가 빈번하지만, 3일간의 인기 상품 랭킹은 자주 갱신되지 않음

### Redis 캐싱 도입하여 해결!
- Read-Through 캐시 전략을 사용하여, 캐시에서 먼저 데이터를 조회하고, 없으면 DB에서 조회 후 캐시에 저장하는 방식
- Redis를 사용하여 빠른 응답을 제공하고 DB 부하를 줄임
- **TTL(Time-to-Live)** 을 설정하여 일정 시간이 지나면 자동으로 캐시 갱신

### 왜 Redis인가?
1. **빠른 데이터 조회 속도**: Redis는 데이터를 메모리에 저장하므로 디스크 기반 데이터베이스보다 훨씬 빠른 읽기/쓰기가 가능합니다. 반복적인 DB 쿼리나 빈번한 조회가 필요한 데이터에 대해 탁월한 성능을 발휘합니다.
2. **Sorted Set 자료구조**: Redis는 Sorted Set이라는 자료구조를 제공하여, 순위나 순차적인 데이터를 효율적으로 저장하고 조회할 수 있습니다. 인기 상품과 같은 판매 순위를 관리하는 데 이상적입니다.
3. **자동 갱신 및 TTL 설정**: Redis는 캐시된 데이터에 **TTL(Time-to-Live)**을 설정하여 일정 시간이 지나면 자동으로 데이터를 갱신할 수 있습니다. 이를 통해 오래된 데이터를 자동으로 업데이트할 수 있으며, 실시간으로 변동하는 데이터를 효율적으로 처리할 수 있습니다.
4. **고가용성 및 확장성**: Redis는 높은 가용성과 확장성을 제공하며, 클러스터링을 통해 여러 서버에 데이터를 분산시켜 처리할 수 있어, 트래픽이 급증하는 상황에서도 안정적으로 운영할 수 있습니다.
5. **단순한 설치와 관리**: Redis는 설치와 설정이 간단하고, 다양한 프로그래밍 언어에서 지원되므로, 개발 환경에 쉽게 통합할 수 있습니다.

### 기대 효과
DB 조회 시간을 줄이고, 반복적인 DB 쿼리를 방지하여 전체 응답 시간 단축하여 서버 성능 향상과 부하 절감 효과

### 캐싱 적용 전/후
캐시 적용 전에는 DB에서 매번 ‘최근 3일간 가장 많이 팔린 상품’을 조회해야 했기 때문에, 요청에 대한 응답 시간(http_req_duration)이 평균 **53.93ms**였으나,
캐시를 적용한 후 응답 시간은 평균 **11.45ms** 이하로 감소했습니다.

>10초 동안 100명의 사용자로 1000번의 요청을 반복함  

1. 캐싱 적용 전
    ![test_before](/src/main/resources/img/test_before.PNG)


2. 캐싱 적용 후
  ![test_after.PNG](/src/main/resources/img/test_after.PNG)